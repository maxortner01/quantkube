{
    "config": {
        "depends_on": ["timescaledb"],
        "environment": {
            "POSTGRES_HOST": "timescaledb",
            "POSTGRES_DB": "timeseries",
            "POSTGRES_USER": "user",
            "POSTGRES_PASSWORD": "password"
        }
    },
    "containers": [
        {
            "name": "timescaledb",
            "config": {
                "image": "timescale/timescaledb:latest-pg14",
                "container_name": "timescaledb",
                "environment": {
                    "POSTGRES_DB": "timeseries",
                    "POSTGRES_USER": "user",
                    "POSTGRES_PASSWORD": "password"
                },
                "ports": ["5432:5432"],
                "networks": ["cppnet"]
            }
        },
        {
            "name": "prometheus",
            "config": {
                "image": "prom/prometheus:latest",
                "container_name": "prometheus",
                "volumes": ["./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml"],
                "command": ["--config.file=/etc/prometheus/prometheus.yml"],
                "ports": ["9090:9090"],
                "networks": ["cppnet"]
            }
        },
        {
            "name": "grafana",
            "config": {
                "image": "grafana/grafana:latest",
                "container_name": "grafana",
                "ports": ["3000:3000"],
                "networks": ["cppnet"],
                "depends_on": ["prometheus"],
                "volumes": ["grafana-storage:/var/lib/grafana"]
            }
        }
    ]
}